#!/usr/bin/env bash

directories=$(find . -type d -not -path '*/\.*' -not -path '.')

for dir in $directories; do
    mkdir ./"$dir"
	mkdir ./"$dir"/.scripts
	cp -r ./.scripts ./"$dir"
	touch ./"$dir"/.new_folder
	touch ./"$dir"/.new_file
	touch ./"$dir"/.new_project
	touch ./"$dir"/.make_copies_of_scripts

	cat ./"$dir"/.scripts/.new_folder >./"$dir"/.new_folder
	cat ./"$dir"/.scripts/.new_file >./"$dir"/.new_file
	cat ./"$dir"/.scripts/.new_project >./"$dir"/.new_project
	cat ./"$dir"/.scripts/.make_copies_of_scripts >./"$dir"/.make_copies_of_scripts

	chmod +x ./"$dir"/.new_folder
	chmod +x ./"$dir"/.new_file
	chmod +x ./"$dir"/.new_project
	chmod +x ./"$dir"/.make_copies_of_scripts

    cd ./"$dir" || exit

    ./.make_copies_of_scripts

    cd ..
done
